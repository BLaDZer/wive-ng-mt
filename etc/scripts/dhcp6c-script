#!/bin/sh

# Wive-NG dhcp6c script

LOG="logger -t dhcp6c"

if [ -n "$new_domain_name" -o -n "$new_domain_name_servers" ]; then
    new_resolv_conf=/etc/resolvipv6.conf
    rm -f $new_resolv_conf
    if [ -n "$new_domain_name" ]; then
	$LOG "ipv6: domain name - $new_domain_name"
        echo search $new_domain_name >> $new_resolv_conf
    fi
    if [ -n "$new_domain_name_servers" ]; then
	$LOG "ipv6: domain name servers - $new_domain_name_servers"
        for nameserver in $new_domain_name_servers; do
            echo nameserver $nameserver >> $new_resolv_conf
        done
    fi
fi

$LOG "Call reconfigure radvd/dhcp6s"
service six dhcpradvdreconf

#!/bin/sh

PWD=`pwd`

rm -rf $PWD/releases
mkdir -p $PWD/releases

DEVLISTREAL="MT7620-2T2R-8M MT7620-2T2R-MT7610-1T1R-5GHZ-8M"
DEVLISTSAMPLES="MT7620-2T2R-MT7610-1T1R-5GHZ-16M-USB MT7620-2T2R-EXTPA-EXTLNA-MT7610-1T1R-5GHZ-16M-USB MT7620-2T2R-EXTPA-EXTLNA-MT7612-2T2R-5GHZ-8M MT7620-2T2R-MT7612-2T2R-5GHZ-16M-USB MT7621-MT7602-MT7612-2T2R-8M-USB MT7621-MT7602-MT7612-2T2R-16M-USB"

./clear

# for fabric build only real devices
if [ "$1" = "YES" ]; then
    DEVLIST="$DEVLISTREAL"
else
    DEVLIST="$DEVLISTREAL $DEVLISTSAMPLES"
fi

for devname in $DEVLIST
do
    ./clear RELEASE
    nice -19 ./compile "$devname" $1 $2 || exit 1
    cp -f $PWD/images/*.zip $PWD/releases
done

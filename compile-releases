#!/bin/sh

PWD=`pwd`

rm -rf $PWD/releases
mkdir -p $PWD/releases

DEVLISTREAL="MT7620-2T2R-8M MT7620-2T2R-MT7610-1T1R-5GHZ-8M MT7620-2T2R-MT7610-1T1R-5GHZ-8M-R1.1 MT7621-MT7603-MT7610-1T1R-16M-USB MT7620-2T2R-8M-AP MT7620-2T2R-MT7610-1T1R-5GHZ-8M-AP MT7620-2T2R-4M MT7620-2T2R-8M-IN"
DEVLISTSAMPLES="MT7621-MT7603-MT7610-1T1R-16M-USB-SFP-CG1 MT7620-2T2R-MT7610-1T1R-5GHZ-16M-USB MT7620-2T2R-EXTPA-EXTLNA-MT7610-1T1R-5GHZ-16M-USB MT7620-2T2R-MT7612-2T2R-5GHZ-16M-USB MT7621-MT7602-MT7612-2T2R-16M-USB MT7621-MT7603-MT7612-2T2R-16M-USB"
DEVLISTSAMPLESAPS=""

./clear

# for fabric build only real devices
if [ "$1" = "YES" ]; then
    DEVLIST="$DEVLISTREAL"
else
    DEVLIST="$DEVLISTREAL $DEVLISTSAMPLES $DEVLISTSAMPLESAPS"
fi

for devname in $DEVLIST
do
    ./clear RELEASE
    nice -19 ./compile "$devname" $1 $2 || exit 1
    cp -f $PWD/images/*.zip $PWD/releases
done

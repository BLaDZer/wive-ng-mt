ngx_addon_name=ngx_http_wive_module
HTTP_FILTER_MODULES="$HTTP_FILTER_MODULES ngx_http_wive_module"

if [ -f "$ngx_addon_dir/DEMO_MODE.flag" ]; then
NGX_ADDON_SRCS=" \
    $NGX_ADDON_SRCS \
    $ngx_addon_dir/stub/libwive.c \
    $ngx_addon_dir/stub/libwive_ethernet.c \
    $ngx_addon_dir/stub/libwive_gpio.c \
    $ngx_addon_dir/stub/libwive_helpers.c \
    $ngx_addon_dir/stub/libwive_network.c \
    $ngx_addon_dir/stub/libwive_procps.c \
    $ngx_addon_dir/stub/libwive_sysstat.c \
    $ngx_addon_dir/stub/libwive_system.c \
    $ngx_addon_dir/stub/libwive_wireless.c \
    $ngx_addon_dir/stub/libnvram.c \
"
ngx_module_libs="--gc-sections -lcrypt -ldl"
NGX_LD_OPT="$NGX_LD_OPT -lcrypt -ldl"
else
ngx_module_libs="--gc-sections -lcrypt -lnvram -lwive -ldl"
NGX_LD_OPT="$NGX_LD_OPT -lcrypt -lnvram -lwive -ldl"
fi

NGX_ADDON_SRCS=" \
    $NGX_ADDON_SRCS \
    $ngx_addon_dir/ngx_http_wive_module.c \
    $ngx_addon_dir/asp_parser.c \
    $ngx_addon_dir/util.c \
    $ngx_addon_dir/asp_mod_helpers.c \
    $ngx_addon_dir/asp_mod_wireless.c \
    $ngx_addon_dir/asp_mod_internet.c \
    $ngx_addon_dir/asp_mod_utils.c \
    $ngx_addon_dir/asp_mod_services.c \
    $ngx_addon_dir/asp_mod_firewall.c \
    $ngx_addon_dir/asp_mod_management.c \
    $ngx_addon_dir/asp_mod_station.c \
    $ngx_addon_dir/asp_mod_storage.c \
    $ngx_addon_dir/asp_mod_qos.c \
    $ngx_addon_dir/asp_mod_usb.c \
    $ngx_addon_dir/firmware.c \
    $ngx_addon_dir/sessionid.c \
"

#    $ngx_addon_dir/asp_mod_test.c \


if [ $HTTP_SSL = YES ]; then
    ngx_module_libs="$ngx_module_libs -lssl -lcrypto"
fi

